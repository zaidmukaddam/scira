# Каталог промптов приложения Scira

Этот документ содержит полное описание всех промптов, используемых в приложении Scira, с группировкой по тематикам.

**Всего найдено:** 20+ промптов
**Общий объем кода промптов:** ~2,500+ строк
**Основной фокус:** Поиск, исследования и извлечение информации с строгими требованиями к цитированию

---

## Оглавление

1. [Поиск и исследования](#1-поиск-и-исследования)
2. [Финансы и криптовалюты](#2-финансы-и-криптовалюты)
3. [Персональная память](#3-персональная-память)
4. [Обычный чат](#4-обычный-чат)
5. [Интеграции](#5-интеграции)
6. [Вспомогательные функции](#6-вспомогательные-функции)
7. [Общие темы и паттерны](#7-общие-темы-и-паттерны)

---

## 1. Поиск и исследования

### 1.1. Web Search (Веб-поиск)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 280-608
**Переменная:** `groupInstructions.web`

**Назначение:**
Основной режим веб-поисковика, помогающий пользователям находить информацию в интернете с форматированием в markdown.

**Ключевые особенности:**
- Контекст даты/времени для актуальных запросов
- Обработка простых приветствий без использования инструментов
- Мультизапросный веб-поиск (3-5 запросов обязательно)
- Руководство по использованию инструментов: web search, code interpreter, weather, location-based searches
- Требования к цитированию с немедленным размещением
- Правила форматирования markdown
- Запрет на множественные вызовы инструментов и неподтвержденные утверждения

**Пример использования:**
Когда пользователь задает вопрос типа "Что нового в технологиях AI в 2025 году?", система генерирует 3-5 целевых поисковых запросов и объединяет результаты с цитированием источников.

---

### 1.2. Academic Search (Академический поиск)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 783-854
**Переменная:** `groupInstructions.academic`

**Назначение:**
Помощник для академических исследований, специализирующийся на анализе научного контента.

**Ключевые особенности:**
- Мультизапросный академический поиск (3-5 запросов в формате массива)
- Фокус на рецензируемых статьях
- Академический стиль прозы (без списков в основном контенте)
- Цитирование с автором, годом и DOI (когда доступно)
- Markdown таблицы для сравнения данных
- LaTeX форматирование для математических выражений

**Пример использования:**
Поиск научных статей по теме "machine learning optimization techniques" с анализом методологий и результатов исследований.

---

### 1.3. Extreme Research Mode (Режим глубоких исследований)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 1071-1294
**Переменная:** `groupInstructions.extreme`

**Назначение:**
Продвинутый исследовательский помощник для глубокого анализа в формате 3-страничного исследовательского отчета.

**Ключевые особенности:**
- **КРИТИЧНО:** Сначала запуск extreme_search инструмента, без предварительного анализа
- Структура исследовательского отчета на 3 страницы
- КАЖДОЕ фактическое утверждение требует немедленного цитирования
- Исключения для простых приветствий
- Строгие правила форматирования markdown
- Запрет на цитирование в конце и разделы "Источники"
- Структура: Введение, Основные разделы, Анализ, Ограничения, Заключение

**Пример использования:**
Глубокое исследование темы "Impact of climate change on agricultural yields in Southeast Asia" с всесторонним анализом и множественными источниками.

---

### 1.4. Reddit Search (Поиск в Reddit)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 914-959
**Переменная:** `groupInstructions.reddit`

**Назначение:**
Эксперт по Reddit-контенту для поиска и обобщения дискуссий на Reddit.

**Ключевые особенности:**
- Мультизапросный поиск Reddit (3-5 запросов в формате массива)
- Формат массива для временного диапазона: ["week", "week", "month"]
- Всесторонние обобщения Reddit дискуссий
- Формат цитирования: `[Post Title - r/subreddit](URL)`
- Краткие и прямые ответы
- Без заголовка h1 в ответах

**Пример использования:**
Поиск мнений пользователей Reddit о новом смартфоне или обсуждений технических проблем.

---

### 1.5. YouTube Search (Поиск в YouTube)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 856-913
**Переменная:** `groupInstructions.youtube`

**Назначение:**
Эксперт по YouTube-контенту, трансформирующий результаты видео в всесторонние ответы.

**Ключевые особенности:**
- Запуск youtube_search инструмента немедленно без преамбулы
- Точное цитирование временных меток в формате: `[Video Title](URL?t=seconds)`
- Только связные параграфы (4-6 предложений), БЕЗ списков
- Извлечение и объяснение ценных инсайтов из видео
- Связывание связанных концепций из разных видео
- Без метаданных видео (названия, каналы, количество просмотров)
- Без общих временных меток (0:00) - все должны быть точными

**Пример использования:**
Поиск туториалов по программированию с точными ссылками на моменты в видео, где объясняются конкретные концепции.

---

### 1.6. X/Twitter Search (Поиск в X/Twitter)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 645-691
**Переменная:** `groupInstructions.x`

**Назначение:**
Эксперт по контенту X, который ищет и трансформирует посты X в всесторонние ответы.

**Ключевые особенности:**
- Мультизапросный поиск X в формате массива (3-5 запросов обязательно)
- СТРОГОЕ правило: Должны использоваться множественные запросы, никогда не одиночный
- Необязательный параметр X handles (извлекается из запроса при упоминании)
- Необязательные диапазоны дат (по умолчанию сегодня)
- Встроенные цитирования сразу после информации
- Математическое форматирование с правильными LaTeX разделителями

**Пример использования:**
Анализ общественного мнения о технологическом событии через посты в X/Twitter с цитированием релевантных твитов.

---

### 1.7. Code Context (Контекст кода)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 729-781
**Переменная:** `groupInstructions.code`

**Назначение:**
Поиск контекста кода для программной документации.

**Ключевые особенности:**
- ЗАПУСК code_context инструмента МГНОВЕННО, без исключений
- Никогда не писать текст/анализ перед запуском инструмента
- Для ВСЕХ языков программирования и фреймворков
- Максимум 1 вызов функции помощника
- Дружественные для разработчиков объяснения с примерами кода
- Ссылка на официальную документацию
- Включение информации о версии, когда релевантно

**Пример использования:**
Поиск документации и примеров использования конкретной библиотеки или функции, например "How to use React hooks?"

---

### 1.8. Connectors Search (Поиск в подключенных документах)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 1356+
**Переменная:** `groupInstructions.connectors`

**Назначение:**
Поиск в Google Drive и подключенных документах.

**Ключевые особенности:**
- ЗАПУСК connectors_search инструмента НЕМЕДЛЕННО
- Без преамбулы перед выполнением инструмента
- Цитирование обязательно
- Точное выполнение пользовательского запроса

**Пример использования:**
Поиск информации в личных документах пользователя на Google Drive.

---

### 1.9. Extreme Search Research Agent (Агент глубоких исследований)

**Файл:** `/home/user/scira/lib/tools/extreme-search.ts`
**Строки:** 268-341

**Назначение:**
Автономный агент глубоких исследований с всесторонней стратегией поиска.

**Ключевые особенности:**
- ОСНОВНОЙ ФОКУС: Исследования на основе поиска (95% работы)
- ПРИОРИТЕТ ПОИСКА НАД КОДОМ
- 3-5 целевых поисков на тему
- Поисковые запросы максимум 5-15 слов
- Возможность фильтрации доменов
- X поиск для обсуждений в реальном времени
- Продолжение с целевыми запросами на основе полученных знаний
- Выполнение кода только при необходимости
- Рабочий процесс исследования от широкого к специфическому

---

### 1.10. Extreme Search Research Plan (План исследований)

**Файл:** `/home/user/scira/lib/tools/extreme-search.ts`
**Строки:** 222-241

**Назначение:**
Генерация плана для автономных исследований.

**Ключевые особенности:**
- Разбиение темы на ключевые аспекты
- Генерация конкретных, разнообразных поисковых запросов
- Ограничение до 15 действий максимум
- Продолжение с более конкретными запросами
- Добавление задач для выполнения кода при запросе
- Без синтеза в всесторонний ответ пока
- Техническое и конкретное планирование

---

## 2. Финансы и криптовалюты

### 2.1. Stocks/Crypto Analysis (Анализ акций/крипто)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 960-1043
**Переменная:** `groupInstructions.stocks`

**Назначение:**
Эксперт по анализу акций и конвертации валют с использованием yfinance.

**Ключевые особенности:**
- Запуск необходимого инструмента СНАЧАЛА без предварительного текста
- Обобщение производительности акций с техническими индикаторами
- Объем торговли и уровни поддержки/сопротивления
- Профессиональный тон аналитика с разделами и подразделами
- Форматирование валют: USD ($), EUR (€), GBP (£), JPY (¥)
- Таблицы для представления множественных точек данных
- Без показа кода в ответе, только инсайты

**Пример использования:**
Анализ цены акций Tesla за последний квартал с техническими индикаторами и прогнозами.

---

### 2.2. Crypto Analysis (Анализ криптовалют)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 1296-1354
**Переменная:** `groupInstructions.crypto`

**Назначение:**
Эксперт по данным криптовалют, работающий с CoinGecko API.

**Ключевые особенности:**
- Минималистичное, ориентированное на данные представление
- Запуск crypto инструмента немедленно без исключений
- Три основных API: coin_data, coin_ohlc, coin_data_by_contract
- ВСЕГДА формат свечей для графиков
- Без многословного анализа, если не запрошено
- Без прогнозов цен или инвестиционных советов
- Один инструмент на ответ максимум

**Пример использования:**
Получение текущих данных о Bitcoin, включая цену, объем торговли, рыночную капитализацию и исторические графики.

---

## 3. Персональная память

### 3.1. Memory/Buddy (Память/Помощник)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 610-643, 694-727
**Переменные:** `groupInstructions.memory`, `groupInstructions.buddy`

**Назначение:**
Помощник-компаньон с памятью для управления персональными воспоминаниями.

**Ключевые особенности:**
- Инструмент памяти должен запускаться немедленно на любое сообщение пользователя
- Поиск в памяти с пользовательскими запросами
- Дружественный и вовлекающий стиль разговора
- Нет необходимости явно упоминать результаты из памяти
- Подтверждение операций с памятью

**Пример использования:**
Запоминание предпочтений пользователя, прошлых разговоров и личной информации для более персонализированного взаимодействия.

---

## 4. Обычный чат

### 4.1. Chat Mode (Режим чата)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 1045-1069
**Переменная:** `groupInstructions.chat`

**Назначение:**
Общий помощник с форматированием markdown.

**Ключевые особенности:**
- Без доступа к инструментам
- Профессиональные возможности программирования
- LaTeX форматирование с правильными разделителями
- Длинные ответы
- Заголовки h2 и выше

**Пример использования:**
Обычные разговоры, объяснение концепций, помощь с кодом без необходимости поиска в интернете.

---

## 5. Интеграции

### 5.1. Raycast Integration (Интеграция Raycast)

**Файл:** `/home/user/scira/app/api/raycast/route.ts`
**Строки:** 16-71
**Переменная:** `groupSystemPrompts`

**Назначение:**
Scira для Raycast - оптимизация веб-поиска и X поиска.

**Два варианта:**

#### A. WEB SEARCH VARIANT (Веб-поиск)
**Строки:** 17-54

**Ключевые особенности:**
- Краткие ответы, оптимизированные для Raycast
- Всегда запускать web_search инструмент сначала
- Множественные целевые запросы (2-4)
- Прямой, эффективный способ для быстрого извлечения информации
- Markdown форматирование, оптимизированное для интерфейса Raycast

#### B. X/TWITTER VARIANT (X/Twitter)
**Строки:** 56-70

**Ключевые особенности:**
- Куратор контента X/Twitter
- Длинные ответы на 2-6 параграфов
- Диапазон дат по умолчанию 1 неделя
- Цитирование на уровне параграфов и предложений
- Правила LaTeX и форматирования валют

---

### 5.2. XQL (X Query Language)

**Файл:** `/home/user/scira/app/api/xql/route.ts`
**Строки:** 154-177

**Назначение:**
Структурированный поиск постов X с всесторонней документацией по инструментам.

**Ключевые особенности:**
- Контекст текущей даты
- Подробная документация по параметрам инструмента
- Диапазон запроса 15 дней до сегодня (по умолчанию)
- Обработка ограничений включения/исключения
- Метрики вовлеченности постов (избранное, просмотры)
- Ограничение результатов (по умолчанию 15, максимум 100)

**Пример использования:**
Специализированный язык запросов для продвинутого поиска в X/Twitter с точными фильтрами.

---

### 5.3. Lookout/Scheduled Search (Запланированный поиск)

**Файл:** `/home/user/scira/app/api/lookout/route.ts`
**Строки:** 201-383

**Назначение:**
Продвинутый исследовательский помощник для запланированных/повторяющихся поисков.

**Ключевые особенности:**
- **КРИТИЧНО**: Запуск extreme_search инструмента МГНОВЕННО, БЕЗ ИСКЛЮЧЕНИЙ
- БЕЗ ПРЕДВАРИТЕЛЬНОГО АНАЛИЗА перед выполнением инструмента
- ТОЛЬКО ОДИН ИНСТРУМЕНТ на запланированный поиск
- Формат исследовательского отчета на 3 страницы
- КАЖДОЕ фактическое утверждение требует цитирования
- Markdown форматирование с правильными заголовками
- Правила размещения цитирования (немедленное, встроенное, без конечных цитирований)
- Запрещенные разделы (без "Источники/Ссылки" и т.д.)

**Пример использования:**
Автоматические ежедневные или еженедельные исследовательские отчеты по определенным темам.

---

## 6. Вспомогательные функции

### 6.1. Title Generation (Генерация заголовков)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 164-184
**Функция:** `generateTitleFromUserMessage()`

**Назначение:**
Генерация кратких заголовков чатов из сообщений пользователя.

**Системное сообщение:**
```
Вы эксперт по генерации заголовков. Вам дается сообщение, и вам нужно сгенерировать короткий заголовок на его основе.
- вы сгенерируете короткий заголовок на основе первого сообщения, с которым пользователь начинает разговор
- убедитесь, что длина не более 80 символов
- заголовок должен быть резюме сообщения пользователя
- заголовок должен быть креативным и уникальным
- не пишите ничего кроме заголовка
- не используйте кавычки или двоеточия
```

**Пример использования:**
Автоматическая генерация заголовка для нового чата на основе первого сообщения пользователя.

---

### 6.2. Suggest Questions (Предложение вопросов)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 95-131
**Функция:** `suggestQuestions()`

**Назначение:**
Генерация предложений последующих вопросов для пользователей.

**Ключевые особенности:**
- Создать ТОЧНО 3 вопроса
- Открытые, поощряющие обсуждение
- Краткие (5-10 слов каждый)
- Конкретные с собственными именами, без местоимений
- Связанные с доступными инструментами
- Естественный поток из разговора
- Типы вопросов, специфичные для инструментов (web, academic, YouTube и т.д.)
- Правила трансформации контекста для разных тем

**Пример использования:**
После ответа на вопрос пользователя, предложение 3 релевантных последующих вопросов для продолжения исследования.

---

### 6.3. Enhance Prompt (Улучшение промпта)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 186-231
**Функция:** `enhancePrompt()`

**Назначение:**
Улучшение и уточнение пользовательских промптов для лучших результатов.

**Системное сообщение:**
```
Вы эксперт по промпт-инжинирингу. Перепишите и улучшите промпт пользователя.
- Сохраните оригинальное намерение и голос
- Сделайте конкретным, недвусмысленным, действенным
- Добавьте недостающий контекст (сущности, временные рамки, местоположение, формат)
- Удалите лишнее, предпочитайте существительные местоимениям
- Оставьте кратким (максимум 1-2 предложения)
- НЕ задавайте последующие вопросы
- НЕ отвечайте на запрос
- НЕ вводите новые факты
```

**Требования:** Подписка Pro

**Пример использования:**
Пользователь вводит нечеткий запрос "расскажи про это", система улучшает его до "Объясни концепцию квантовых вычислений с практическими примерами применения в 2025 году".

---

### 6.4. Image Moderation (Модерация изображений)

**Файл:** `/home/user/scira/app/actions.ts`
**Строки:** 146-162
**Модель:** `groq('meta-llama/llama-guard-4-12b')`

**Назначение:**
Модерация контента для изображений, загружаемых пользователями.

**Пример использования:**
Автоматическая проверка загружаемых изображений на недопустимый контент.

---

### 6.5. Text Translate (Перевод текста)

**Файл:** `/home/user/scira/lib/tools/text-translate.ts`
**Строка:** 15

**Назначение:**
Простой перевод между языками с использованием формата ISO 639-1.

**Системное сообщение:**
```typescript
system: `You are a helpful assistant that translates text from one language to another.`
```

**Пример использования:**
Перевод текста с одного языка на другой по запросу пользователя.

---

### 6.6. X Search Tool System Prompt (Системный промпт для поиска X)

**Файл:** `/home/user/scira/lib/tools/x-search.ts`
**Строка:** 76

**Назначение:**
Структурированное извлечение постов X с возможностью глубокого поиска.

**Системное сообщение:**
```typescript
system: `You are a helpful assistant that searches for X posts and returns the results in a structured format...Go very deep in the search and return the most relevant results.`
```

**Пример использования:**
Внутренний инструмент для выполнения поиска в X/Twitter с возвратом структурированных результатов.

---

## 7. Общие темы и паттерны

Все промпты в приложении Scira следуют единым принципам и паттернам:

### 7.1. Требования к цитированию

**Применяется к:** Почти все промпты поиска и исследований

**Правила:**
- КАЖДОЕ фактическое утверждение требует немедленного встроенного цитирования
- Цитирования размещаются сразу после информации, к которой они относятся
- СТРОГО ЗАПРЕЩЕНО группировать цитирования в конце ответа
- ЗАПРЕЩЕНЫ разделы "Источники", "Ссылки", "References" в конце
- Цитирования должны быть естественной частью текста

**Пример правильного цитирования:**
```
Исследования показывают, что квантовые компьютеры могут превзойти классические в определенных задачах [Nature, 2024]. Однако коммерческое применение все еще ограничено из-за технических сложностей [MIT Tech Review, 2025].
```

---

### 7.2. Приоритет выполнения инструментов

**Применяется к:** Большинство специализированных промптов

**Правила:**
- Инструменты должны запускаться НЕМЕДЛЕННО без преамбулы
- НЕ писать вводный текст перед выполнением инструмента
- НЕ объяснять, что вы собираетесь делать
- Анализ и ответ только ПОСЛЕ получения результатов инструмента

**Исключения:**
- Простые приветствия (можно ответить без инструментов)
- Уточняющие вопросы (когда запрос неясен)

---

### 7.3. Мультизапросный подход

**Применяется к:** Web, Academic, Reddit, X/Twitter поиск

**Правила:**
- Всегда использовать 3-5 различных поисковых запросов
- Запросы должны быть в формате массива
- Запросы должны покрывать разные аспекты темы
- ЗАПРЕЩЕНО использовать одиночный запрос

**Пример:**
```javascript
queries: [
  "quantum computing practical applications 2025",
  "quantum computer vs classical computer performance",
  "quantum computing commercial availability",
  "quantum computing challenges limitations"
]
```

---

### 7.4. Форматирование Markdown

**Применяется к:** Все промпты

**Правила:**
- Использовать заголовки h2 (`##`) и выше (НЕ h1)
- Для YouTube и некоторых других режимов: только параграфы, БЕЗ списков
- Для академических и исследовательских режимов: академическая проза
- LaTeX для математических выражений с правильными разделителями
- Таблицы для сравнения данных
- Правильное форматирование валют: $ € £ ¥

---

### 7.5. Контекст даты и времени

**Применяется к:** Все промпты

**Правила:**
- Все промпты включают контекст текущей даты
- Поощряется использование временного контекста в запросах
- Для X/Twitter и Reddit: опции фильтрации по временным диапазонам
- Дефолтные диапазоны: последняя неделя, месяц и т.д.

---

### 7.6. Обработка приветствий

**Применяется к:** Большинство промптов поиска

**Правила:**
- Простые приветствия ("Привет", "Hello") обрабатываются без инструментов
- Приветствия с вопросами требуют использования инструментов
- Дружелюбный ответ на приветствие, затем готовность к помощи

---

### 7.7. Стиль ответов

**Варьируется по типу промпта:**

- **Web/Academic:** Всесторонние, хорошо структурированные
- **YouTube:** Только параграфы, без списков, с точными временными метками
- **Reddit:** Краткие, прямые
- **Stocks/Crypto:** Минималистичные, ориентированные на данные
- **Research:** Длинные, 3-страничные отчеты с глубоким анализом
- **Chat:** Разговорные, но профессиональные

---

## Статистика

### Распределение промптов по категориям:

1. **Поиск и исследования:** 10 промптов (50%)
2. **Финансы и криптовалюты:** 2 промпта (10%)
3. **Персональная память:** 1 промпт (5%)
4. **Обычный чат:** 1 промпт (5%)
5. **Интеграции:** 3 промпта (15%)
6. **Вспомогательные функции:** 6 промптов (30%)

### Ключевые метрики:

- **Общее количество основных системных промптов:** 13
- **Инструмент-специфичных промптов:** 7+
- **Вспомогательных функциональных промптов:** 6+
- **Общий объем кода промптов:** ~2,500+ строк
- **Основной фокус:** Поиск, исследования и извлечение информации

---

## Рекомендации по использованию

### Для разработчиков:

1. **При добавлении нового промпта:**
   - Следуйте существующим паттернам цитирования
   - Используйте мультизапросный подход для поисковых промптов
   - Включайте контекст даты/времени
   - Запрещайте конечные разделы с цитированиями

2. **При модификации промпта:**
   - Сохраняйте единый стиль форматирования
   - Тестируйте с различными типами запросов
   - Убедитесь, что инструменты запускаются немедленно
   - Проверьте правила цитирования

3. **Общие принципы:**
   - Приоритет точности над скоростью
   - Всегда цитируйте источники
   - Используйте правильное форматирование markdown
   - Адаптируйте стиль под назначение промпта

---

## Заключение

Приложение Scira использует сложную систему промптов, оптимизированных для различных типов поиска и исследований. Основное внимание уделяется точности, цитированию источников и структурированному представлению информации. Все промпты следуют единым принципам форматирования и поведения, что обеспечивает последовательный пользовательский опыт.

**Дата составления каталога:** 2025-11-06
**Версия приложения:** Актуальная версия в репозитории на момент анализа
